syntax = "proto3";

option java_multiple_files = true;

package chatnexus.chat;

enum AuthType {
    None = 0;
    Standard = 1;
    OAuth2 = 2;
}

enum AuthStatus {
    OK = 0;
    PENDING = 1;
    DENIED = 2;
}

enum AuthStage { 
    STAGE_1 = 0; // Waiting for approval from the user...
    STAGE_2 = 1; // Create session_id and token for the user & url.
    STAGE_3 = 2; // Waiting to finish sign in page... through oauth2
}

service Auth {
    rpc NotifyAuth2Service(AuthRequest) returns (AuthResponse);
}

message AuthRequest {
    optional string session_id = 1;
}

message AuthResponse {
    AuthType type = 1;
    AuthStatus status = 2;
    optional AuthStage stage = 3;
    string session_id = 4;
    optional string url = 5;
    optional string code = 6;
}

message AuthGenerationResponse {
    string session_id = 1;
}

// end of Auth

// Start of chat..
service Chat {
    // Message Sending
    rpc SendMessage (ChatRequest) returns (ChatResponse);
    rpc RecieveMessage (Empty) returns (ChatRequest);
    // Authentication
    //rpc SendAuthMessage(Empty) returns (BarenResponse);
}

// service Auth {
    //rpc Authenticate
    //rpc CurrentAuth
    //rpc SendAuthUrl
    //
//}

message Empty {} // Empty request

message ChatRequest { // client request
    string username = 1;
    string message = 2;
}

message ChatResponse { // client response
    bool Status = 1;
}

message BarenResponse {
    string message = 1;
}